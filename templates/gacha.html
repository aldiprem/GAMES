<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gacha Username - Marketplace</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/GAMES/static/css/gacha.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <main class="main-content" id="mainContent"></main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="games">
                <i class="fas fa-gamepad"></i>
                <span>Games</span>
            </button>
            <button class="nav-btn" data-page="gacha">
                <i class="fas fa-dice"></i>
                <span>Gacha</span>
            </button>
            <button class="nav-btn" data-page="profile">
                <i class="fas fa-user"></i>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- Deposit Modal -->
    <div class="modal" id="depositModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Deposit Stars</h3>
                <button class="close-btn" onclick="closeDepositModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Jumlah Stars</label>
                    <input type="number" id="depositAmount" min="1" max="2500" value="10" class="form-control">
                    <small class="form-text">Min: 1 ⭐, Max: 2500 ⭐</small>
                </div>
                <div class="quick-amounts">
                    <button class="amount-btn" data-amount="10">10 ⭐</button>
                    <button class="amount-btn" data-amount="50">50 ⭐</button>
                    <button class="amount-btn" data-amount="100">100 ⭐</button>
                    <button class="amount-btn" data-amount="500">500 ⭐</button>
                </div>
                <div class="info-text">
                    <i class="fas fa-info-circle"></i>
                    Anda akan diarahkan ke bot Telegram untuk pembayaran
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeDepositModal()">Batal</button>
                <button class="btn-primary" onclick="initDeposit()">Lanjutkan</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Pembayaran Deposit</h3>
                <button class="close-btn" onclick="closePaymentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="payment-info" id="paymentInfo"></div>
                <div class="payment-link-container" id="paymentLinkContainer"></div>
                <div class="payment-status" id="paymentStatus" style="display: none;">
                    <div class="spinner"></div>
                    <p>Menunggu konfirmasi pembayaran...</p>
                </div>
                <div class="payment-details" id="paymentDetails"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closePaymentModal()">Tutup</button>
                <button class="btn-primary" id="payButton" style="display: none;">Bayar Sekarang</button>
            </div>
        </div>
    </div>

    <!-- Gacha Modal -->
    <div class="modal" id="gachaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Gacha Username</h3>
                <button class="close-btn" onclick="closeGachaModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="gacha-box">
                    <div class="username-display">?????</div>
                    <div class="price-display">??? ⭐</div>
                </div>
                <button class="btn-primary btn-large" id="spinButton" onclick="spinGacha()">
                    <i class="fas fa-dice"></i> Spin Gacha
                </button>
                <div class="gacha-result" id="gachaResult"></div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                <h3>Berhasil!</h3>
                <button class="close-btn" onclick="closeSuccessModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-content">
                    <i class="fas fa-check-circle"></i>
                    <p id="successMessage">Pembayaran berhasil!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                <h3>Error!</h3>
                <button class="close-btn" onclick="closeErrorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="error-content">
                    <i class="fas fa-exclamation-circle"></i>
                    <p id="errorMessage">Terjadi kesalahan</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/gacha.js"></script>
</body>
</html>